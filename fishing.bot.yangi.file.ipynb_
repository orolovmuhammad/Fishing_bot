{"cells":[{"cell_type":"code","execution_count":8,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3938,"status":"ok","timestamp":1747145632781,"user":{"displayName":"Eldorbek Shavkatov","userId":"00915714801454306887"},"user_tz":-300},"id":"BdXkqwpwYRI-","outputId":"ab187df3-1237-43b2-bfdf-3f1fe0171dff"},"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: scikit-learn in /usr/local/lib/python3.11/dist-packages (1.6.1)\n","Collecting pyTelegramBotAPI\n","  Downloading pytelegrambotapi-4.27.0-py3-none-any.whl.metadata (48 kB)\n","\u001b[?25l     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m0.0/48.3 kB\u001b[0m \u001b[31m?\u001b[0m eta \u001b[36m-:--:--\u001b[0m\r\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m48.3/48.3 kB\u001b[0m \u001b[31m2.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hRequirement already satisfied: pandas in /usr/local/lib/python3.11/dist-packages (2.2.2)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.11/dist-packages (2.0.2)\n","Requirement already satisfied: scipy>=1.6.0 in /usr/local/lib/python3.11/dist-packages (from scikit-learn) (1.15.2)\n","Requirement already satisfied: joblib>=1.2.0 in /usr/local/lib/python3.11/dist-packages (from scikit-learn) (1.5.0)\n","Requirement already satisfied: threadpoolctl>=3.1.0 in /usr/local/lib/python3.11/dist-packages (from scikit-learn) (3.6.0)\n","Requirement already satisfied: requests in /usr/local/lib/python3.11/dist-packages (from pyTelegramBotAPI) (2.32.3)\n","Requirement already satisfied: python-dateutil>=2.8.2 in /usr/local/lib/python3.11/dist-packages (from pandas) (2.9.0.post0)\n","Requirement already satisfied: pytz>=2020.1 in /usr/local/lib/python3.11/dist-packages (from pandas) (2025.2)\n","Requirement already satisfied: tzdata>=2022.7 in /usr/local/lib/python3.11/dist-packages (from pandas) (2025.2)\n","Requirement already satisfied: six>=1.5 in /usr/local/lib/python3.11/dist-packages (from python-dateutil>=2.8.2->pandas) (1.17.0)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.11/dist-packages (from requests->pyTelegramBotAPI) (3.4.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.11/dist-packages (from requests->pyTelegramBotAPI) (3.10)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.11/dist-packages (from requests->pyTelegramBotAPI) (2.4.0)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.11/dist-packages (from requests->pyTelegramBotAPI) (2025.4.26)\n","Downloading pytelegrambotapi-4.27.0-py3-none-any.whl (287 kB)\n","\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m287.4/287.4 kB\u001b[0m \u001b[31m11.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25hInstalling collected packages: pyTelegramBotAPI\n","Successfully installed pyTelegramBotAPI-4.27.0\n"]}],"source":["!pip install scikit-learn pyTelegramBotAPI pandas numpy"]},{"cell_type":"code","execution_count":4,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":34800,"status":"ok","timestamp":1747145550172,"user":{"displayName":"Eldorbek Shavkatov","userId":"00915714801454306887"},"user_tz":-300},"id":"1sm2dJSKYt7T","outputId":"a8198dc3-5abe-40f0-ea8a-c8762c584970"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1173,"status":"ok","timestamp":1747135922649,"user":{"displayName":"Eldorbek Shavkatov","userId":"00915714801454306887"},"user_tz":-300},"id":"RXWVoPijZeeX","outputId":"48a4e81e-9eac-462f-984d-8648c36b7acd"},"outputs":[{"name":"stdout","output_type":"stream","text":["Ma’lumotlar to‘plami saqlandi!\n"]}],"source":["import pandas as pd\n","\n","# Ma’lumotlar to‘plami\n","data = {\n","    'text': [\n","        'Hisobingiz bloklandi! Darhol ushbu havolani bosing: [soxta-link.uz]',\n","        'Siz yutdingiz! Mukofotni olish uchun parolingizni kiriting.',\n","        'Bank kartangiz ma’lumotlari yangilanishi kerak: [soxta-link.com]',\n","        'Sizga katta chegirma! Ushbu havolada ro‘yxatdan o‘ting.',\n","        'Bugun soat 15:00 da uchrashuv bo‘ladi.',\n","        'Sizga yangi xabar keldi, iltimos, tekshiring.',\n","        'Ertaga loyiha topshirig‘i muddati tugaydi.',\n","        'Do‘stingizdan xabar: Kechqurun uchrashamizmi?'\n","    ],\n","    'label': [1, 1, 1, 1, 0, 0, 0, 0]  # 1: fishing, 0: oddiy\n","}\n","\n","# DataFrame yaratish\n","df = pd.DataFrame(data)\n","\n","# CSV fayl sifatida saqlash\n","df.to_csv('/content/drive/MyDrive/dataset.csv', index=False)\n","print(\"Ma’lumotlar to‘plami saqlandi!\")"]},{"cell_type":"code","execution_count":7,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3584,"status":"ok","timestamp":1747145622177,"user":{"displayName":"Eldorbek Shavkatov","userId":"00915714801454306887"},"user_tz":-300},"id":"eDmw2JHYauus","outputId":"2748fdc2-a7db-41f1-a1bb-4ea9a51e69d9"},"outputs":[{"output_type":"stream","name":"stdout","text":["Model aniqligi: 50.00%\n","Model va vectorizer saqlandi!\n"]}],"source":["import pandas as pd\n","from sklearn.feature_extraction.text import TfidfVectorizer\n","from sklearn.naive_bayes import MultinomialNB\n","from sklearn.model_selection import train_test_split\n","import pickle\n","\n","# Ma’lumotlarni o‘qish\n","data = pd.read_csv('/content/drive/MyDrive/dataset.csv')\n","\n","# Matn va teglarni ajratish\n","texts = data['text']\n","labels = data['label']\n","\n","# Matnni vektorga aylantirish\n","vectorizer = TfidfVectorizer()\n","X = vectorizer.fit_transform(texts)\n","\n","# Ma’lumotlarni o‘qitish va test qismiga bo‘lish\n","X_train, X_test, y_train, y_test = train_test_split(X, labels, test_size=0.2, random_state=42)\n","\n","# Modelni o‘qitish\n","model = MultinomialNB()\n","model.fit(X_train, y_train)\n","\n","# Modelning aniqligini tekshirish\n","accuracy = model.score(X_test, y_test)\n","print(f\"Model aniqligi: {accuracy * 100:.2f}%\")\n","\n","# Model va vectorizerni saqlash\n","with open('/content/drive/MyDrive/phishing_model.pkl', 'wb') as f:\n","    pickle.dump(model, f)\n","with open('/content/drive/MyDrive/vectorizer.pkl', 'wb') as f:\n","    pickle.dump(vectorizer, f)\n","\n","print(\"Model va vectorizer saqlandi!\")"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"clud8kpycScz","outputId":"c63d3ec6-8c42-48f2-93a2-42c434f3e430"},"outputs":[{"output_type":"stream","name":"stdout","text":["Bot ishga tushdi...\n"]}],"source":["import telebot\n","from sklearn.feature_extraction.text import TfidfVectorizer\n","from sklearn.naive_bayes import MultinomialNB\n","import pickle\n","\n","# Bot tokenini kiriting\n","TOKEN ='7956849183:AAELmyR2jQtklsDpIRPtncLmKxqUND2TJmE'  # Bu yerga BotFather’dan olgan tokeningizni qo‘ying\n","\n","# Botni ishga tushirish\n","bot = telebot.TeleBot(TOKEN)\n","\n","# Model va vectorizerni yuklash\n","with open('/content/drive/MyDrive/phishing_model.pkl', 'rb') as f:\n","    model = pickle.load(f)\n","with open('/content/drive/MyDrive/vectorizer.pkl', 'rb') as f:\n","    vectorizer = pickle.load(f)\n","\n","# /start buyrug‘i\n","@bot.message_handler(commands=['start'])\n","def send_welcome(message):\n","    bot.reply_to(message, \"Salom! Men fishing xabarlarni aniqlayman. Xabar matnini yuboring, men uni tekshiraman.\")\n","\n","# /help buyrug‘i\n","@bot.message_handler(commands=['help'])\n","def send_help(message):\n","    bot.reply_to(message, \"Xabar matnini yuboring, men uni fishing yoki oddiy xabar sifatida tekshiraman.\\nMaslahatlar uchun /tips buyrug‘ini ishlatishingiz mumkin.\")\n","\n","# /tips buyrug‘i\n","@bot.message_handler(commands=['tips'])\n","def send_tips(message):\n","    tips = (\n","        \"1. Noma’lum havolalarni bosmang.\\n\"\n","        \"2. Shubhali xabarlarni ochmang.\\n\"\n","        \"3. Ikki faktorli autentifikatsiyani yoqing.\\n\"\n","        \"4. Parolingizni hech kimga bermang.\"\n","    )\n","    bot.reply_to(message, tips)\n","\n","# Matn xabarlarini qayta ishlash\n","@bot.message_handler(content_types=['text'])\n","def check_message(message):\n","    text = message.text\n","    # Matnni vektorga aylantirish\n","    text_vector = vectorizer.transform([text])\n","    # Fishing ekanligini bashorat qilish\n","    prediction = model.predict(text_vector)\n","    if prediction[0] == 1:\n","        bot.reply_to(message, \"⚠️ Bu xabar fishing bo‘lishi mumkin! Ehtiyot bo‘ling va havolalarni bosmang.\")\n","    else:\n","        bot.reply_to(message, \"✅ Bu xabar xavfsiz ko‘rinadi.\")\n","\n","# Botni ishga tushirish\n","print(\"Bot ishga tushdi...\")\n","bot.polling()"]}],"metadata":{"colab":{"provenance":[{"file_id":"1sak5wGgIbrFEyYADBKxr_b5p-oUDjNWD","timestamp":1747144961230}],"authorship_tag":"ABX9TyOSC0ZcEW6hfPKwF47xuAjV"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}